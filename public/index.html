<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>DISCOVER CHHATTISGARH </title>
<style>
  :root{
    --bg-0: #1a1a2e;
    --bg-1: #16213e;
    --bg-2: #0f3460;
    --card: #0f1724;
    --muted: #94a3b8;
    --accent: linear-gradient(90deg,#3b82f6,#06b6d4);
    --accent-solid: #3b82f6;
    --glass: rgba(255,255,255,0.03);
    --radius: 12px;
    color-scheme: dark;
    --shadow: 0 8px 30px rgba(2,6,23,0.6);
  }

  /* Page */
  html,body{
    height:100%;
    margin:0;
    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
    background-attachment: fixed;
    font-family:Inter,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial;
    color:#e6eefc;
    position: relative;
    overflow-x: hidden;
  }
  
  /* Animated background gradient */
  body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
    background-size: 400% 400%;
    animation: gradientShift 15s ease infinite;
    z-index: -1;
  }
  
  @keyframes gradientShift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }
  *{box-sizing:border-box}

  /* Header */
  header{
    padding:16px 20px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:12px;
    background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
    border-bottom:1px solid rgba(255,255,255,0.02);
    backdrop-filter: blur(6px);
  }
  header h1{margin:0;font-size:18px;letter-spacing:0.2px;font-weight:600}
  header .brand-sub{color:var(--muted);font-size:13px}

  /* Layout */
  #app{display:grid;grid-template-columns:300px 1fr;gap:12px;padding:18px;height:calc(100% - 84px);box-sizing:border-box}
  @media (max-width:900px){#app{grid-template-columns:1fr;padding:12px;height:calc(100% - 120px)}}

  /* Panels */
  .panel{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:var(--radius);padding:14px;box-shadow:var(--shadow);overflow:auto;border:1px solid rgba(255,255,255,0.02)}
  .panel h3{margin:0 0 12px 0;color:#e6eefc}

  /* Places list */
  #placesList{display:flex;flex-direction:column;gap:8px}
  #placesList button{
    display:flex;align-items:center;gap:12px;padding:10px;border-radius:10px;border:0;background:transparent;color:#d1d5db;cursor:pointer;transition:all .18s ease;
    box-shadow: inset 0 0 0 1px rgba(255,255,255,0.01);
  }
  #placesList button:hover{transform:translateY(-2px);background:linear-gradient(90deg, rgba(59,130,246,0.08), rgba(6,182,212,0.04));box-shadow:0 6px 18px rgba(3,10,38,0.6)}
  #placesList button:active{transform:translateY(0)}
  #placesList button::before{
    content:"";width:10px;height:10px;border-radius:50%;background:linear-gradient(180deg,#7dd3fc,#60a5fa);box-shadow:0 2px 6px rgba(59,130,246,0.18)
  }

  /* Preview / canvas */
  #preview{position:relative;height:100%;display:flex;flex-direction:column;gap:10px}
  .canvas-wrap{position:relative;flex:1;border-radius:10px;overflow:hidden;border:1px solid rgba(255,255,255,0.03);box-shadow:inset 0 2px 0 rgba(255,255,255,0.02)}
  canvas{width:100%;height:100%;display:block;background:#000;border-radius:8px}

  /* Controls */
  #controls{display:flex;gap:10px;align-items:center}
  .btn{
    padding:8px 14px;border-radius:10px;border:0;background:var(--accent-solid);color:white;cursor:pointer;font-weight:600;box-shadow:0 6px 18px rgba(59,130,246,0.12);transition:transform .12s ease,box-shadow .12s ease,opacity .12s ease;
  }
  .btn:hover{transform:translateY(-3px)}
  .btn.secondary{background:#111827;box-shadow:none;font-weight:500}
  #fov{vertical-align:middle;margin-left:8px}

  /* Hotspot (DOM) */
  .hotspot{
    position:absolute;transform:translate(-50%,-50%);width:44px;height:44px;border-radius:999px;background:radial-gradient(circle at 30% 30%, rgba(255,255,255,0.12), rgba(255,255,255,0.04));display:flex;align-items:center;justify-content:center;color:#fff;font-size:13px;border:2px solid rgba(255,255,255,0.12);
    box-shadow:0 6px 18px rgba(0,0,0,0.6);backdrop-filter: blur(4px);cursor:pointer;transition:transform .14s ease,box-shadow .14s ease,opacity .2s;
  }
  .hotspot:hover{transform:scale(1.08);box-shadow:0 12px 28px rgba(3,10,38,0.6)}
  .hotspot[data-label]{--tooltip:attr(data-label);}

  /* Footer */
  .footer-stripe{
    height:10px;
    margin:12px 18px 0; /* space and horizontal inset to match panels */
    border-top-left-radius:10px;
    border-top-right-radius:10px;
    background: linear-gradient(180deg, #000, rgba(0,0,0,0.85));
    box-shadow: 0 -6px 24px rgba(0,0,0,0.6) inset;
    pointer-events: none;
  }
  footer{
    margin-top:8px;
    color:var(--muted);
    padding:12px 18px;
    font-size:18px;
    text-align:center;
    border-top:1px solid rgba(255,255,255,0.02);
    background:linear-gradient(180deg, transparent, rgba(255,255,255,0.01));
  }

  /* Small utilities */
  .muted{color:var(--muted);font-size:13px}
  .kbd{padding:4px 8px;border-radius:6px;background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.02);font-weight:600;font-size:12px}

  /* Custom scrollbar for panels */
  .panel::-webkit-scrollbar{width:10px;height:10px}
  .panel::-webkit-scrollbar-thumb{background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));border-radius:999px;border:2px solid transparent}
  .panel::-webkit-scrollbar-track{background:transparent}

  /* Responsive tweaks */
  @media (max-width:640px){
    header{padding:12px}
    #controls{flex-wrap:wrap}
    .btn{flex:1}
    .hotspot{width:40px;height:40px;font-size:12px}
    #placesList button{padding:12px}
  }
    /* Bottom-right compass */
  .compass {
    position: fixed;
    right: 18px;
    bottom: 18px;
    width: 110px;
    height: 110px;
    border-radius: 12px;
    background: rgba(5,6,10,0.75);
    box-shadow: 0 6px 18px rgba(0,0,0,0.6);
    display: flex;
    align-items: center;
    justify-content: center;
    color: #e6eefc;
    font-family: system-ui, Arial, sans-serif;
    z-index: 9999;
    border: 1px solid rgba(255,255,255,0.04);
    user-select: none;
    padding: 8px;
  }
  .compass .face {
    position: relative;
    width: 84px;
    height: 84px;
    border-radius: 50%;
    background: radial-gradient(circle at 30% 30%, rgba(235, 154, 154, 0.03), transparent 30%);
    display:flex;align-items:center;justify-content:center;
  }
  .compass .cardinal {
    position: absolute;
    font-weight:700;
    font-size:12px;
    color: #cbd5e1;
    pointer-events:none;
  }
  .compass .cardinal.n { top: 8px; left: 50%; transform: translateX(-50%); }
  .compass .cardinal.s { bottom: 8px; left: 50%; transform: translateX(-50%); }
  .compass .cardinal.e { right: 8px; top: 50%; transform: translateY(-50%); }
  .compass .cardinal.w { left: 8px; top: 50%; transform: translateY(-50%); }

  .compass .needle {
    width: 4px;
    height: 25px;
    background: linear-gradient(180deg,#ff7a7a,#f28f8f);
    position: center;
    border-radius: 3px;
    transform-origin: 50% 70%;
    box-shadow: 0 4px 10px rgba(202, 148, 148, 0.6);
  }
  .compass .needle::after {
    content:'';
    position:absolute;
    bottom:-8px;
    left:50%; transform:translateX(-50%);
    width:10px;height:10px;border-radius:50%;background:rgba(0,0,0,0.4);
  }
  .compass .centerDot {
    position:absolute;width:6px;height:6px;border-radius:50%;background:#fff;opacity:0.9;z-index:2;
  }

  @media (max-width:640px){ .compass { width:84px; height:84px; right:12px; bottom:12px } .compass .face{width:66px;height:66px} }

  /* Iframe controls */
  .iframe-container {
    position: relative;
    margin: 0 auto;
    max-width: 100%;
    width: 100%;
    height: calc(100vh - 140px);
    padding: 20px;
    box-sizing: border-box;
    animation: fadeInUp 0.8s ease-out;
  }
  
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .iframe-controls {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    display: flex;
    gap: 10px;
    justify-content: center;
    padding: 16px 20px;
    background: linear-gradient(180deg, transparent, rgba(26,26,46,0.95));
    backdrop-filter: blur(10px);
    border-top: 1px solid rgba(255,255,255,0.1);
    z-index: 1000;
    flex-wrap: wrap;
    animation: slideUp 0.6s ease-out;
  }
  
  @keyframes slideUp {
    from {
      transform: translateY(100%);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }
  
  .iframe-controls .btn {
    padding: 12px 24px;
    font-size: 15px;
    min-width: 120px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
  }
  
  .iframe-controls .btn::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.2);
    transform: translate(-50%, -50%);
    transition: width 0.6s, height 0.6s;
  }
  
  .iframe-controls .btn:hover::before {
    width: 300px;
    height: 300px;
  }
  
  .iframe-controls .btn:hover {
    transform: translateY(-3px) scale(1.05);
    box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
  }
  
  .iframe-controls .btn:active {
    transform: translateY(-1px) scale(1.02);
  }
  
  .iframe-controls .btn .btn-icon {
    transition: transform 0.3s ease;
    position: relative;
    z-index: 1;
  }
  
  .iframe-controls .btn:hover .btn-icon {
    transform: rotate(5deg) scale(1.1);
  }
  
  .iframe-controls .btn span {
    position: relative;
    z-index: 1;
  }
  
  .btn-icon {
    width: 18px;
    height: 18px;
    display: inline-block;
  }
  
  #panoramaIframe {
    width: 100%;
    height: 100%;
    animation: fadeIn 1s ease-out;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }
  
  #panoramaIframe:hover {
    transform: scale(1.01);
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3);
  }
  
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
  
  /* Pulse animation for VR button */
  @keyframes pulse {
    0%, 100% {
      box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.7);
    }
    50% {
      box-shadow: 0 0 0 10px rgba(59, 130, 246, 0);
    }
  }
  
  #iframeVr {
    animation: pulse 2s infinite;
  }
</style>
</head>
<body>
<header><h1>Discover CG â€” EK Virtual Safar </h1></header>
<div class="iframe-container">
  <iframe id="panoramaIframe" allowFullScreen="true" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; magnetometer; microphone; xr-spatial-tracking; camera; fullscreen; vr" style="display:block; border:0 none; border-radius:8px; box-shadow: 0 1px 1px rgba(0,0,0,0.11),0 2px 2px rgba(0,0,0,0.11),0 4px 4px rgba(0,0,0,0.11),0 6px 8px rgba(0,0,0,0.11),0 8px 16px rgba(0,0,0,0.11);" src="https://panoraven.com/en/embed/XAn2qfBhuA"></iframe>
</div>
<div class="iframe-controls">
  <button id="iframeVr" class="btn">
    <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M5 12h14"/>
      <path d="M12 5l7 7-7 7"/>
      <rect x="2" y="6" width="20" height="12" rx="2"/>
      <path d="M7 10h2M7 14h2"/>
      <path d="M15 10h2M15 14h2"/>
    </svg>
    <span>Enter VR</span>
  </button>
  <button id="iframeGyro" class="btn secondary">
    <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="9"/>
      <path d="M12 3v3M12 18v3M3 12h3M18 12h3"/>
      <path d="M7.05 7.05l2.12 2.12M14.83 14.83l2.12 2.12M7.05 16.95l2.12-2.12M14.83 9.17l2.12-2.12"/>
      <path d="M12 9a3 3 0 1 0 0 6 3 3 0 0 0 0-6z"/>
      <path d="M12 8v8M8 12h8"/>
    </svg>
    <span id="gyroText">Gyro Off</span>
  </button>
  <button id="iframeResetView" class="btn secondary">Reset View</button>
  <button id="iframeFullscreen" class="btn secondary">Fullscreen</button>
</div>

<script>
/* ========= Iframe VR and Gyro Controls ========= */
let iframeUsingGyro = false;
const iframe = document.getElementById('panoramaIframe');

// VR Button
document.getElementById('iframeVr').addEventListener('click', async () => {
  try {
    if (!navigator.xr) {
      alert('WebXR not supported in this browser');
      return;
    }
    const supported = await navigator.xr.isSessionSupported('immersive-vr');
    if (!supported) {
      alert('VR session not available');
      return;
    }
    // Try to enter VR through iframe content
    iframe.contentWindow?.postMessage({ type: 'enterVR' }, '*');
    alert('VR mode activate by clicking the VR button in the iframe');
  } catch(err) {
    console.error('VR error:', err);
    alert('VR start error: ' + err.message);
  }
});

// Gyro Button
document.getElementById('iframeGyro').addEventListener('click', async () => {
  if (!iframeUsingGyro && typeof DeviceOrientationEvent !== 'undefined' && typeof DeviceOrientationEvent.requestPermission === 'function') {
    try {
      const resp = await DeviceOrientationEvent.requestPermission();
      if (resp !== 'granted') {
        alert('Gyro permission denied');
        return;
      }
    } catch (e) {
      console.warn('Gyro permission request failed', e);
    }
  }
  iframeUsingGyro = !iframeUsingGyro;
  const gyroText = document.getElementById('gyroText');
  gyroText.textContent = iframeUsingGyro ? 'Gyro On' : 'Gyro Off';
  
  // Send message to iframe to enable/disable gyro
  iframe.contentWindow?.postMessage({ 
    type: 'toggleGyro', 
    enabled: iframeUsingGyro 
  }, '*');
});

// Reset View Button
document.getElementById('iframeResetView').addEventListener('click', () => {
  // Send message to iframe to reset view
  iframe.contentWindow?.postMessage({ type: 'resetView' }, '*');
  // Also reload iframe as fallback
  const currentSrc = iframe.src;
  iframe.src = '';
  setTimeout(() => {
    iframe.src = currentSrc;
  }, 100);
});

// Fullscreen Button
document.getElementById('iframeFullscreen').addEventListener('click', () => {
  if (iframe.requestFullscreen) {
    iframe.requestFullscreen();
  } else if (iframe.webkitRequestFullscreen) {
    iframe.webkitRequestFullscreen();
  } else if (iframe.mozRequestFullScreen) {
    iframe.mozRequestFullScreen();
  } else if (iframe.msRequestFullscreen) {
    iframe.msRequestFullscreen();
  }
});
</script>
</body>
</html>
